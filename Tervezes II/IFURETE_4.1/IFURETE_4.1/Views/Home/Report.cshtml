
@{
    ViewData["Title"] = "Report";
}

<div class="card">
    <div class="card-header">
        Report
    </div>

    <b>Beszállító:</b>
    <select name="roles" id="selectPurveyor" class="custom-select"></select>
    <br />

    <form id="typeForm">
        <input type="radio" name="type" id="daily">  <b>Napi riport</b>
        <input type="radio" name="type" id="monthly">  <b>Havi riport</b>
    </form>
    <br /><br />
    <p id="placeForDayCalendar" />
    <b id="placeForText"></b>
    <p id="placeForFromCalendar" />
    <p id="placeForToCalendar" />
    <br />

    <table id="reportTable" class="table table-bordered"></table>
</div>
<script>
    var selectPurveyor = document.getElementById("selectPurveyor");
    var purveyors = ["Sefag Zrt.", "Jankovicz Kft.", "Agroeuropa d.o.o", "Agrogreen Kft.", "Atiméd Kft."];
    for (var i = 0; i < purveyors.length; i++)
    {
        var el = document.createElement("option");
        el.textContent = purveyors[i];
        el.value = purveyors[i];
        selectPurveyor.appendChild(el);
    }

    function generateReportTable()
    {
        var thOfHourlyArray = ["Anyagnév", "Tervezett (t)", "Valós (t)", "Különbség (t)", "%"];

        var tbl = document.getElementById("reportTable");
        var tblBody = document.createElement("tbody");

        var materialArray = new Array;
        materialArray = ["Keményfa", "Szalma", "Erdei apríték"];

        var plannedArray = new Array;
        plannedArray = [200, 500, 300];

        var actulArray = new Array;
        actulArray = [200, 450, 320];

        var differenceArray = new Array;
        differenceArray = [0, 50, 20];

        var percentageArray = new Array;
        for (var i = 0; i < plannedArray.length; i++)
        {
            percentageArray[i] = Math.floor((actulArray[i] / plannedArray[i]) * 100);
        }

        var row = document.createElement("tr");
        var cellText
        for (var i = 0; i < thOfHourlyArray.length; i++)
        {
            var cell = document.createElement("th");
            cellText = document.createTextNode(thOfHourlyArray[i]);
            cell.appendChild(cellText);
            row.appendChild(cell);
        }
        tblBody.appendChild(row);

        for (var i = 0; i < materialArray.length; i++)
        {
            var row = document.createElement("tr");
            var cell = document.createElement("td");

            cellText = document.createTextNode(materialArray[i]);
            cell.appendChild(cellText);
            row.appendChild(cell);
            cell = document.createElement("td");

            //ID
            cellText = document.createTextNode(plannedArray[i]);
            cell.appendChild(cellText);
            row.appendChild(cell);
            cell = document.createElement("td");

            cellText = document.createTextNode(actulArray[i]);
            cell.appendChild(cellText);
            row.appendChild(cell);
            cell = document.createElement("td");

            //SUPPLIER
            cellText = document.createTextNode(differenceArray[i]);
            cell.appendChild(cellText);
            row.appendChild(cell);
            cell = document.createElement("td");

            //TIME
            cellText = document.createTextNode(percentageArray[i]);
            cell.appendChild(cellText);
            row.appendChild(cell);
            cell = document.createElement("td");

            tblBody.appendChild(row);
        }

        tblBody.appendChild(row);

        while (tbl.firstChild)
        {
            tbl.removeChild(tbl.firstChild);
        }
        tbl.appendChild(tblBody);
        tbl.setAttribute("border", "2");
    }

    document.getElementById("typeForm").addEventListener("change", typeForm);

    function typeForm(event)
    {
        var type = event.target.id;
        if (type == "monthly")
        {
            var placeForDayCalendar = document.getElementById("placeForDayCalendar");
            placeForDayCalendar.removeChild(placeForDayCalendar.firstChild);



            var fromDate = document.createElement("INPUT");
            fromDate.setAttribute("type", "month");
            fromDate.setAttribute("class", "form-control");
            var placeForFromCalendar = document.getElementById("placeForFromCalendar");

            placeForFromCalendar.appendChild(fromDate);

            while (placeForFromCalendar.firstChild)
            {
                placeForFromCalendar.removeChild(placeForFromCalendar.firstChild);
            }

            placeForFromCalendar.appendChild(fromDate);

            var toDate = document.createElement("INPUT");
            toDate.setAttribute("type", "month");
            toDate.setAttribute("class", "form-control");
            var placeForToCalendar = document.getElementById("placeForToCalendar");

            placeForToCalendar.appendChild(toDate);

            while (placeForToCalendar.firstChild)
            {
                placeForToCalendar.removeChild(placeForToCalendar.firstChild);
            }

            placeForToCalendar.appendChild(toDate);


        }
        else
        {
            var placeForFromCalendar = document.getElementById("placeForFromCalendar");
            placeForFromCalendar.removeChild(placeForFromCalendar.firstChild);

            var placeForToCalendar = document.getElementById("placeForToCalendar");
            placeForToCalendar.removeChild(placeForToCalendar.firstChild);

            var date = document.createElement("INPUT");
            date.setAttribute("type", "date");
            date.setAttribute("class", "form-control");
            var placeForDayCalendar = document.getElementById("placeForDayCalendar");

            placeForDayCalendar.appendChild(date);

            while (placeForDayCalendar.firstChild)
            {
                placeForDayCalendar.removeChild(placeForDayCalendar.firstChild);
            }

            placeForDayCalendar.appendChild(date);

        }

        generateReportTable();
    }

</script>

<style>
    #reportTable {
        text-align: center;
        vertical-align: middle;
        width: 98%; /* Full-width */
        border: 1px solid #ddd; /* Add a grey border */
        font-size: 18px; /* Increase font-size */
        margin: 1%;
    }

        #reportTable tr:hover {
            /* Add a grey background color to the table header and on hover */
            background-color: #f1f1f1;
        }

    h2, b, #selectPurveyor, form {
        margin: 5px;
    }

    #selectPurveyor, .form-control {
        width: 20%;
    }

    b {
        margin-right: 30px;
        font-size: 20px;
    }

    input {
        margin: 10px;
    }
</style>
